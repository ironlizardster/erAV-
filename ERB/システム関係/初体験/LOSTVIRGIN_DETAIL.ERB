;===========================================================
;処女喪失の状況
;===========================================================
@LOSTVIRGIN_DETAIL_CALC

VARSET LOCAL, 0
IF CFLAG:処女喪失日付固定 == 0
	IF CFLAG:処女喪失月 == 1 || CFLAG:処女喪失月 == 2 || CFLAG:処女喪失月 == 4 || CFLAG:処女喪失月 == 6 || CFLAG:処女喪失月 == 7 || CFLAG:処女喪失月 == 9 || CFLAG:処女喪失月 == 11 
		IF CFLAG:処女喪失日 == 1
			CFLAG:処女喪失日付固定 = RAND:7
				SIF CFLAG:処女喪失日付固定 == 0
					CFLAG:処女喪失日付固定 = 1
		ELSEIF CFLAG:処女喪失日 == 2
			CFLAG:処女喪失日付固定 = 8 + RAND:7
		ELSEIF CFLAG:処女喪失日 == 3
			CFLAG:処女喪失日付固定 = 15 + RAND:8
			SIF CFLAG:処女喪失日付固定 == 14
				CFLAG:処女喪失日付固定 = 15
		ELSEIF CFLAG:処女喪失日 == 4
			CFLAG:処女喪失日付固定 = 23 + RAND:7
		ENDIF
	ELSE
		IF CFLAG:処女喪失日 == 1
			CFLAG:処女喪失日付固定 = RAND:7
				SIF CFLAG:処女喪失日付固定 == 0
					CFLAG:処女喪失日付固定 = 1
		ELSEIF CFLAG:処女喪失日 == 2
			CFLAG:処女喪失日付固定 = 7 + RAND:7
		ELSEIF CFLAG:処女喪失日 == 3
			CFLAG:処女喪失日付固定 = 14 + RAND:7
			SIF CFLAG:処女喪失日付固定 == 14
				CFLAG:処女喪失日付固定 = 15
		ELSEIF CFLAG:処女喪失日 == 4
			CFLAG:処女喪失日付固定 = 21 + RAND:7
		ELSEIF CFLAG:処女喪失日 == 5
			CFLAG:処女喪失日付固定 = 28 + RAND:7
			SIF CFLAG:処女喪失日付固定 >= 31
				CFLAG:処女喪失日付固定 = 31
		ENDIF		
	ENDIF
	SIF CFLAG:処女喪失日付固定 == MAXBASE:誕生日 && CFLAG:処女喪失月 == MAXBASE:誕生月
		CFLAG:処女喪失誕生日記念 = 1
ENDIF

;===========================================================
;CFLAG:処女喪失年齢 = 年齢
;CFLAG:処女喪失月 = 月
;CFLAG:処女喪失日 = 週
;CFLAG:処女喪失場所 = 場所
;CFLAG:処女喪失シチュ = 状況
;CFLAG:処女喪失日付固定 = 日付固定用
;===========================================================
@LOSTVIRGIN_DETAIL

CHKFONT "あくびん"
	IF RESULT
		SETFONT "あくびん"
	ENDIF
	SETCOLOR 0xF58F98
	PRINT 　
	CALL HEART_CODE
	PRINT 処女喪失　　　：

IF ABL:信頼 < 3 && NO:TARGET != [[キャラ:あなた]]
	PRINTL 済
ELSE




CALL LOSTVIRGIN_DETAIL_CALC

IF CFLAG:処女喪失年齢 == 0
	PRINTFORM 何年か前の
ELSE
	PRINTFORM  {CFLAG:処女喪失年齢}歳の
ENDIF

IF CFLAG:処女喪失月 == 0
	PRINTFORM ある日
ELSE
	SIF CFLAG:処女喪失月 <= 9
		PRINTFORM  
	PRINTFORM {CFLAG:処女喪失月}月
ENDIF

IF ( CFLAG:処女喪失年齢 == 0 && CFLAG:処女喪失月 == 0 ) || CFLAG:処女喪失日付固定 == 0
ELSE
	SIF CFLAG:処女喪失日付固定 <= 9
		PRINTFORM  
	PRINTFORM {CFLAG:処女喪失日付固定}日
ENDIF

PRINTFORM に


IF CFLAG:処女喪失場所 == 0 || CFLAG:処女喪失場所 >= 15
ELSE
	IF CFLAG:処女喪失場所 == 1
		PRINTFORM %CALLNAME:TARGET%の部屋
	ELSEIF CFLAG:処女喪失場所 == 2 && CFLAG:初体験の相手 == 8 && TALENT:彼氏あり == 0 && EXP:彼氏性経験 >= 1
		IF CSTR:処女喪失の相手 == ""
			PRINTFORM 元カレの部屋
		ELSE
			PRINTFORM %CSTR:処女喪失の相手%（元カレ）の部屋
		ENDIF	
	ELSEIF CFLAG:処女喪失場所 == 2 && CFLAG:初体験の相手 == 8 && TALENT:彼氏あり == 1
		IF CSTR:処女喪失の相手 == ""
			PRINTFORM カレシの部屋
		ELSE
			PRINTFORM %CSTR:処女喪失の相手%（カレシ）の部屋
		ENDIF
	ELSEIF CFLAG:処女喪失場所 == 3
		PRINTFORM ラブホテル
	ELSEIF CFLAG:処女喪失場所 == 4
		PRINTFORM 海
	ELSEIF CFLAG:処女喪失場所 == 5
		PRINTFORM 学校
	ELSEIF CFLAG:処女喪失日付固定 == 6
		PRINTFORM 廃工場
	ELSEIF CFLAG:処女喪失場所 == 7
		PRINTFORM 娼館
	ELSEIF CFLAG:処女喪失場所 == 8
		PRINTFORM 電車の中
	ELSEIF CFLAG:処女喪失場所 == 9
		PRINTFORM バスの中
	ELSEIF CFLAG:処女喪失場所 == 10
		PRINTFORM 野外
	ELSEIF CFLAG:処女喪失場所 == 11
		PRINTFORM プール
	ELSEIF CFLAG:処女喪失場所 == 12
		PRINTFORM 秘密の地下室
	ELSEIF CFLAG:処女喪失場所 == 13
		PRINTFORM 会員制の秘密クラブ
	ELSEIF CFLAG:処女喪失場所 == 14
		PRINTFORM 撮影スタジオ
	ENDIF
	PRINTFORM で、
ENDIF

SIF CFLAG:処女喪失誕生日記念 == 1
	PRINTFORM 誕生日記念に

IF CFLAG:初体験の相手 == 0
	PRINTFORM 覚えていない誰か
ELSEIF CFLAG:初体験の相手 == 1
	PRINTFORM %CSTR:処女喪失の相手%
ELSEIF CFLAG:初体験の相手 == 2
	PRINTFORM 売春で名前も知らない男性客
ELSEIF CFLAG:初体験の相手 == 3
	PRINTFORM 売春で名前も知らない女性客
ELSEIF CFLAG:初体験の相手 == 4
	PRINTFORM バイブ
ELSEIF CFLAG:初体験の相手 == 5
	PRINTFORM 極太バイブ
ELSEIF CFLAG:初体験の相手 == 6
	PRINTFORM 売春で名前も知らない客
ELSEIF CFLAG:初体験の相手 == 7
	PRINTFORM 痴漢
ELSEIF CFLAG:初体験の相手 == 8 && CFLAG:167 == 1
	IF CSTR:処女喪失の相手 == ""
		PRINTFORM 元カレ
	ELSE
		PRINTFORM %CSTR:処女喪失の相手%（元カレ）
	ENDIF	
ELSEIF CFLAG:初体験の相手 == 8 && TALENT:彼氏あり == 1 && CFLAG:処女喪失場所 != 2
	IF CSTR:処女喪失の相手 == ""
		PRINTFORM カレシ
	ELSE
		PRINTFORM %CSTR:処女喪失の相手%（カレシ）
	ENDIF	
ELSEIF CFLAG:初体験の相手 == 9
	PRINTFORM セフレの%CSTR:セフレ姓%
ELSEIF CFLAG:初体験の相手 == 11
	PRINTFORM 不良
;;;このあたりは対象者を入れる（状況だと、のちのち記述上の問題が生じやすいので）
ELSEIF CFLAG:初体験の相手 == 12
	PRINTFORM 枕営業のお相手
ELSEIF CFLAG:初体験の相手 == 13
	PRINTFORM 『接待』客
ELSEIF CFLAG:初体験の相手 == 14
	PRINTFORM 触手生物
ELSEIF CFLAG:初体験の相手 == 15
	PRINTFORM 夫
ELSEIF CFLAG:初体験の相手 == 16
	PRINTFORM %NAME:MASTER%
ENDIF

IF CFLAG:初体験の相手 == 4 || CFLAG:初体験の相手 == 5
	PRINTFORM で
ELSEIF CFLAG:初体験の相手 == 10
	;空分岐。スタッフNTR用。
;意図がわからない分岐だったのでいったん殺す
;↑分かった。l166あたりでカレシの名前二回表示されるのくどいから避けてたのね。復帰
ELSEIF CFLAG:処女喪失場所 == 2 && CFLAG:初体験の相手 == 8 && TALENT:彼氏あり == 1
	PRINTFORM 
;ELSEIF CFLAG:初体験の相手 >= 11 || CFLAG:処女喪失シチュ >= 1
;	PRINTFORM に
;上の代替
ELSEIF CFLAG:処女喪失シチュ >= 3
	PRINTFORM に
ELSE
	PRINTFORM と
ENDIF

IF CFLAG:処女喪失シチュ == 0
	PRINTFORM 
ELSEIF CFLAG:処女喪失シチュ == 1
	PRINTFORM 指導中に
ELSEIF CFLAG:処女喪失シチュ == 2
	PRINTFORM 撮影中に
ELSEIF CFLAG:処女喪失シチュ == 3
	PRINTFORM ハメ撮りされながら
ELSEIF CFLAG:処女喪失シチュ == 4
	PRINTFORM 無理やり犯されて
ELSEIF CFLAG:処女喪失シチュ == 5
	PRINTFORM 輪姦されて
ELSEIF CFLAG:処女喪失シチュ == 6
	PRINTFORML
	PRINTFORM  クスリをキめさせられ、自ら%CSTR:男性器呼び方%をおねだり
ENDIF

PRINTFORML %UNICODE(0x2665)%

ENDIF

SETFONT ""
RESETCOLOR